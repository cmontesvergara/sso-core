# ============================================================
# SSO Backend Configuration
# ============================================================
# Sintaxis simplificada:
#   variable: valor                    # Valor simple
#   variable:
#     _default: valor                  # Con default
#   variable:
#     _mandatory: true                 # Obligatorio (debe venir de .env)
#   variable:
#     _mandatory: true
#     _default: valor                  # Obligatorio con fallback
#
# Prioridad: .env > _value > _default
# ============================================================

core_config_version: 0

# ============================================================
# Server Configuration
# ============================================================

port:
  _default: 3567

host:
  _default: localhost

# ============================================================
# Database Configuration (ALL MANDATORY)
# ============================================================
# Override with: DB_TYPE, DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_PASSWORD
# ============================================================

database:
  type:
    _mandatory: true
    _default: postgresql
  
  host:
    _mandatory: true
  
  port:
    _mandatory: true
    _default: 5432
  
  name:
    _mandatory: true
  
  user:
    _mandatory: true
  
  password:
    _mandatory: true
  
  ssl:
    _default: false

# ============================================================
# JWT Configuration
# ============================================================
# JWT_SECRET is mandatory and should come from environment
# ============================================================

jwt:
  secret:
    _mandatory: true
  
  algorithm:
    _default: HS256
  
  iss:
    _mandatory: true
    _default: bigso.co

  aud:
    _mandatory: false

  kid:
    _mandatory: true
    _default: sso-key-2026

  private_key_path: null
  public_key_path: null

# ============================================================
# Token Validity (in seconds)
# ============================================================

access_token_validity:
  _default: 3600

refresh_token_validity:
  _default: 604800

# ============================================================
# Session Configuration
# ============================================================

session:
  expiry_time:
    _default: 3600
  
  refresh_threshold:
    _default: 600

# ============================================================
# Email Configuration
# ============================================================

email:
  provider:
    _default: smtp
  
  smtp:
    host:
      _default: localhost
    port:
      _default: 1025
    secure:
      _default: false
    user: ""
    password: ""
  
  resend:
    apikey:
      _mandatory: false
  from:
    _default: noreply@supertokens.com

# ============================================================
# CORS Configuration
# ============================================================

cors:
  enabled:
    _default: true
  
  origin:
    _default: "http://localhost:3000"
  
  credentials:
    _default: true
  
  methods:
    _default:
      - GET
      - POST
      - PUT
      - DELETE
      - PATCH

# ============================================================
# Logging Configuration
# ============================================================

logging:
  level:
    _default: info
  
  format:
    _default: json

# ============================================================
# API Rate Limiting
# ============================================================

rateLimit:
  signup:
    windowMs:
      _default: 3600000  # 1 hour
    max:
      _default: 5
  
  signin:
    windowMs:
      _default: 900000   # 15 minutes
    max:
      _default: 10
  
  refresh:
    windowMs:
      _default: 60000    # 1 minute
    max:
      _default: 30
  
  signout:
    windowMs:
      _default: 60000    # 1 minute
    max:
      _default: 60

# ============================================================
# Features
# ============================================================

features:
  email_verification:
    _default: true
  
  email_password_auth:
    _default: true
  
  passwordless:
    _default: true
  
  social_login:
    _default: false
  
  mfa:
    _default: true
  
  oauth:
    _default: false
  
  multitenancy:
    _default: true
  
  user_roles:
    _default: true
  
  user_metadata:
    _default: true
  
  account_linking:
    _default: false
