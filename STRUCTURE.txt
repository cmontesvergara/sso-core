supertokens-core-node/
â”‚
â”œâ”€â”€ ğŸ“„ CONFIGURACIÃ“N Y SETUP
â”‚   â”œâ”€â”€ package.json ........................ Dependencias y scripts npm
â”‚   â”œâ”€â”€ tsconfig.json ....................... ConfiguraciÃ³n TypeScript
â”‚   â”œâ”€â”€ jest.config.json ................... ConfiguraciÃ³n Jest
â”‚   â”œâ”€â”€ .eslintrc.json ..................... Reglas ESLint
â”‚   â”œâ”€â”€ .prettierrc.json ................... Formato Prettier
â”‚   â”œâ”€â”€ .gitignore ......................... Git ignore patterns
â”‚   â”œâ”€â”€ .dockerignore ...................... Docker ignore patterns
â”‚   â”œâ”€â”€ config.yaml ........................ ConfiguraciÃ³n principal (YAML)
â”‚   â”œâ”€â”€ .env.example ....................... Template de variables de entorno
â”‚   â””â”€â”€ setup.sh ........................... Script de setup automatizado
â”‚
â”œâ”€â”€ ğŸ“ SRC - CÃ“DIGO FUENTE
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸš€ ENTRY POINTS
â”‚   â”‚   â”œâ”€â”€ index.ts ....................... Entry point del servidor
â”‚   â”‚   â””â”€â”€ server.ts ...................... ConfiguraciÃ³n Express
â”‚   â”‚
â”‚   â”œâ”€â”€ âš™ï¸ CONFIG
â”‚   â”‚   â””â”€â”€ config/
â”‚   â”‚       â””â”€â”€ index.ts .................. ConfigManager (Singleton)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”Œ MIDDLEWARE
â”‚   â”‚   â””â”€â”€ middleware/
â”‚   â”‚       â”œâ”€â”€ auth.ts ................... AutenticaciÃ³n JWT
â”‚   â”‚       â”œâ”€â”€ errorHandler.ts .......... Manejo centralizado de errores
â”‚   â”‚       â””â”€â”€ logging.ts ............... Request/Response logging
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ RUTAS API
â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚       â”œâ”€â”€ auth.ts .................. Endpoints: signup, signin, signout, refresh
â”‚   â”‚       â”œâ”€â”€ session.ts ............... Endpoints: verify, refresh, revoke
â”‚   â”‚       â”œâ”€â”€ user.ts .................. Endpoints: CRUD de usuarios
â”‚   â”‚       â”œâ”€â”€ tenant.ts ................ Endpoints: multi-tenancy
â”‚   â”‚       â”œâ”€â”€ role.ts .................. Endpoints: roles y permisos
â”‚   â”‚       â”œâ”€â”€ emailVerification.ts ..... Endpoints: email verification
â”‚   â”‚       â”œâ”€â”€ metadata.ts .............. Endpoints: user metadata
â”‚   â”‚       â””â”€â”€ docs.ts .................. DocumentaciÃ³n de API
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ¯ SERVICIOS (BUSINESS LOGIC)
â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚       â”œâ”€â”€ auth.ts .................. AuthenticationService (Singleton)
â”‚   â”‚       â”œâ”€â”€ session.ts ............... SessionService (Singleton)
â”‚   â”‚       â”œâ”€â”€ user.ts .................. UserService (Singleton)
â”‚   â”‚       â”œâ”€â”€ tenant.ts ................ TenantService (Singleton)
â”‚   â”‚       â”œâ”€â”€ role.ts .................. RoleService (Singleton)
â”‚   â”‚       â”œâ”€â”€ jwt.ts ................... JWTService (Singleton) - JWT handling
â”‚   â”‚       â”œâ”€â”€ crypto.ts ................ CryptoService (Singleton) - Hashing
â”‚   â”‚       â””â”€â”€ email.ts ................. EmailService (Singleton) - Email sending
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ’¾ DATABASE LAYER
â”‚   â”‚   â””â”€â”€ database/
â”‚   â”‚       â””â”€â”€ types.ts ................. Interfaces para DB
â”‚   â”‚
â”‚   â”œâ”€â”€ âŒ EXCEPCIONES PERSONALIZADAS
â”‚   â”‚   â””â”€â”€ exceptions/
â”‚   â”‚       â””â”€â”€ index.ts ................. Custom exception classes
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“¦ TIPOS TYPESCRIPT
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚       â””â”€â”€ index.ts ................. Tipos: User, Session, Tenant, Role, etc.
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ› ï¸ UTILIDADES
â”‚       â””â”€â”€ utils/
â”‚           â”œâ”€â”€ logger.ts ............... Logger estructurado (JSON)
â”‚           â”œâ”€â”€ validator.ts ............ Validator con chaining
â”‚           â”œâ”€â”€ helpers.ts .............. Funciones auxiliares
â”‚           â””â”€â”€ __tests__/
â”‚               â”œâ”€â”€ logger.test.ts ...... Tests para logger
â”‚               â””â”€â”€ validator.test.ts ... Tests para validator
â”‚
â”œâ”€â”€ ğŸ³ DEPLOYMENT
â”‚   â”œâ”€â”€ Dockerfile ......................... Imagen Docker multi-stage
â”‚   â”œâ”€â”€ docker-compose.yml ................ Docker Compose con MySQL
â”‚   â””â”€â”€ .dockerignore ..................... Archivos ignorados en Docker
â”‚
â”œâ”€â”€ ğŸ“š DOCUMENTACIÃ“N
â”‚   â”œâ”€â”€ README.md .......................... Overview del proyecto
â”‚   â”œâ”€â”€ PROJECT_GUIDE.md .................. GuÃ­a completa y detallada
â”‚   â”œâ”€â”€ DEVELOPMENT.md .................... GuÃ­a de desarrollo
â”‚   â”œâ”€â”€ QUICK_REFERENCE.md ................ Referencia rÃ¡pida
â”‚   â”œâ”€â”€ CONTRIBUTING.md ................... GuÃ­a de contribuciÃ³n
â”‚   â”œâ”€â”€ NEXT_STEPS.md ..................... PrÃ³ximos pasos recomendados
â”‚   â”œâ”€â”€ SUMMARY.txt ....................... Resumen ejecutivo
â”‚   â”œâ”€â”€ LICENSE ........................... Licencia MIT
â”‚   â”œâ”€â”€ QUICK_START.md .................... Este archivo
â”‚   â””â”€â”€ this_file ......................... Estructura del proyecto
â”‚
â””â”€â”€ ğŸ“‹ INFORMACIÃ“N DEL PROYECTO
    â”œâ”€â”€ VersiÃ³n: 11.3.0
    â”œâ”€â”€ Node.js Requerido: >= 18.0.0
    â”œâ”€â”€ Licencia: MIT
    â”œâ”€â”€ Archivos Creados: 48
    â”œâ”€â”€ Archivos TypeScript: 27
    â”œâ”€â”€ LÃ­neas de CÃ³digo: ~2,500+
    â”œâ”€â”€ Rutas API: 31 endpoints
    â”œâ”€â”€ Servicios: 8
    â”œâ”€â”€ Middleware: 3
    â””â”€â”€ Tests: 2 suites

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ESTRUCTURA DETALLADA DE RUTAS:

src/
â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ Entry point
â”‚       â””â”€â”€ Carga config
â”‚       â””â”€â”€ Crea servidor Express
â”‚       â””â”€â”€ Inicia listeners
â”‚       â””â”€â”€ Maneja seÃ±ales SIGTERM/SIGINT
â”‚
â”œâ”€â”€ server.ts
â”‚   â”œâ”€â”€ Express setup
â”‚   â”‚   â”œâ”€â”€ Helmet (security headers)
â”‚   â”‚   â”œâ”€â”€ CORS (configurable)
â”‚   â”‚   â”œâ”€â”€ Body parser
â”‚   â”‚   â””â”€â”€ Cookie parser
â”‚   â”œâ”€â”€ Middleware
â”‚   â”‚   â”œâ”€â”€ Logging
â”‚   â”‚   â””â”€â”€ Error handler
â”‚   â”œâ”€â”€ Health check
â”‚   â””â”€â”€ Rutas API
â”‚       â””â”€â”€ /api/v1/
â”‚           â”œâ”€â”€ /auth (auth.ts)
â”‚           â”œâ”€â”€ /session (session.ts)
â”‚           â”œâ”€â”€ /user (user.ts)
â”‚           â”œâ”€â”€ /tenant (tenant.ts)
â”‚           â”œâ”€â”€ /role (role.ts)
â”‚           â”œâ”€â”€ /email-verification (emailVerification.ts)
â”‚           â””â”€â”€ /metadata (metadata.ts)
â”‚
â”œâ”€â”€ config/index.ts
â”‚   â”œâ”€â”€ Carga config.yaml
â”‚   â”œâ”€â”€ Override con .env
â”‚   â””â”€â”€ Getter/Setter centralizado
â”‚
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ authMiddleware (requiere token)
â”‚   â”‚   â””â”€â”€ optionalAuthMiddleware (token opcional)
â”‚   â”‚
â”‚   â”œâ”€â”€ errorHandler.ts
â”‚   â”‚   â”œâ”€â”€ Captura errores globales
â”‚   â”‚   â””â”€â”€ Retorna respuesta JSON estandarizada
â”‚   â”‚
â”‚   â””â”€â”€ logging.ts
â”‚       â”œâ”€â”€ Log request
â”‚       â”œâ”€â”€ Captura response
â”‚       â””â”€â”€ Registra duraciÃ³n
â”‚
â”œâ”€â”€ routes/ (8 archivos)
â”‚   â”œâ”€â”€ auth.ts (4 endpoints)
â”‚   â”‚   â”œâ”€â”€ POST /signup
â”‚   â”‚   â”œâ”€â”€ POST /signin
â”‚   â”‚   â”œâ”€â”€ POST /signout
â”‚   â”‚   â””â”€â”€ POST /refresh
â”‚   â”‚
â”‚   â”œâ”€â”€ session.ts (3 endpoints)
â”‚   â”‚   â”œâ”€â”€ GET /verify
â”‚   â”‚   â”œâ”€â”€ POST /refresh
â”‚   â”‚   â””â”€â”€ POST /revoke
â”‚   â”‚
â”‚   â”œâ”€â”€ user.ts (3 endpoints)
â”‚   â”‚   â”œâ”€â”€ GET /:userId
â”‚   â”‚   â”œâ”€â”€ PUT /:userId
â”‚   â”‚   â””â”€â”€ DELETE /:userId
â”‚   â”‚
â”‚   â”œâ”€â”€ tenant.ts (3 endpoints)
â”‚   â”‚   â”œâ”€â”€ POST /
â”‚   â”‚   â”œâ”€â”€ GET /:tenantId
â”‚   â”‚   â””â”€â”€ PUT /:tenantId
â”‚   â”‚
â”‚   â”œâ”€â”€ role.ts (3 endpoints)
â”‚   â”‚   â”œâ”€â”€ POST /
â”‚   â”‚   â”œâ”€â”€ GET /:roleId
â”‚   â”‚   â””â”€â”€ POST /:roleId/permission
â”‚   â”‚
â”‚   â”œâ”€â”€ emailVerification.ts (2 endpoints)
â”‚   â”‚   â”œâ”€â”€ POST /send
â”‚   â”‚   â””â”€â”€ POST /verify
â”‚   â”‚
â”‚   â”œâ”€â”€ metadata.ts (3 endpoints)
â”‚   â”‚   â”œâ”€â”€ POST /:userId
â”‚   â”‚   â”œâ”€â”€ GET /:userId
â”‚   â”‚   â””â”€â”€ PUT /:userId
â”‚   â”‚
â”‚   â””â”€â”€ docs.ts (1 endpoint)
â”‚       â””â”€â”€ GET / (API docs)
â”‚
â”œâ”€â”€ services/ (8 archivos)
â”‚   â”œâ”€â”€ auth.ts (AuthenticationService)
â”‚   â”‚   â”œâ”€â”€ signup(email, password, tenantId)
â”‚   â”‚   â”œâ”€â”€ signin(email, password, tenantId)
â”‚   â”‚   â”œâ”€â”€ signout(userId, sessionId)
â”‚   â”‚   â””â”€â”€ verifyPassword(password, hash)
â”‚   â”‚
â”‚   â”œâ”€â”€ session.ts (SessionService)
â”‚   â”‚   â”œâ”€â”€ createSession()
â”‚   â”‚   â”œâ”€â”€ getSessionById()
â”‚   â”‚   â”œâ”€â”€ getSessionByUserId()
â”‚   â”‚   â”œâ”€â”€ verifySession()
â”‚   â”‚   â”œâ”€â”€ revokeSession()
â”‚   â”‚   â””â”€â”€ refreshSession()
â”‚   â”‚
â”‚   â”œâ”€â”€ user.ts (UserService)
â”‚   â”‚   â”œâ”€â”€ createUser()
â”‚   â”‚   â”œâ”€â”€ getUserById()
â”‚   â”‚   â”œâ”€â”€ getUserByEmail()
â”‚   â”‚   â”œâ”€â”€ updateUser()
â”‚   â”‚   â”œâ”€â”€ deleteUser()
â”‚   â”‚   â””â”€â”€ verifyEmail()
â”‚   â”‚
â”‚   â”œâ”€â”€ tenant.ts (TenantService)
â”‚   â”‚   â”œâ”€â”€ createTenant()
â”‚   â”‚   â”œâ”€â”€ getTenantById()
â”‚   â”‚   â”œâ”€â”€ getTenantByName()
â”‚   â”‚   â”œâ”€â”€ updateTenant()
â”‚   â”‚   â””â”€â”€ deleteTenant()
â”‚   â”‚
â”‚   â”œâ”€â”€ role.ts (RoleService)
â”‚   â”‚   â”œâ”€â”€ createRole()
â”‚   â”‚   â”œâ”€â”€ getRoleById()
â”‚   â”‚   â”œâ”€â”€ getRoleByName()
â”‚   â”‚   â”œâ”€â”€ addPermissionToRole()
â”‚   â”‚   â”œâ”€â”€ removePermissionFromRole()
â”‚   â”‚   â””â”€â”€ deleteRole()
â”‚   â”‚
â”‚   â”œâ”€â”€ jwt.ts (JWTService - Singleton)
â”‚   â”‚   â”œâ”€â”€ generateToken(payload, expiresIn)
â”‚   â”‚   â”œâ”€â”€ verifyToken(token)
â”‚   â”‚   â”œâ”€â”€ decodeToken(token)
â”‚   â”‚   â””â”€â”€ refreshToken(token, expiresIn)
â”‚   â”‚
â”‚   â”œâ”€â”€ crypto.ts (CryptoService - Singleton)
â”‚   â”‚   â”œâ”€â”€ hashPassword(password, rounds)
â”‚   â”‚   â”œâ”€â”€ comparePassword(password, hash)
â”‚   â”‚   â”œâ”€â”€ generateToken(length)
â”‚   â”‚   â””â”€â”€ generateId()
â”‚   â”‚
â”‚   â””â”€â”€ email.ts (EmailService - Singleton)
â”‚       â”œâ”€â”€ sendEmail(options)
â”‚       â”œâ”€â”€ sendVerificationEmail()
â”‚       â””â”€â”€ sendPasswordResetEmail()
â”‚
â”œâ”€â”€ database/
â”‚   â””â”€â”€ types.ts
â”‚       â”œâ”€â”€ DatabaseConfig interface
â”‚       â”œâ”€â”€ QueryBuilder interface
â”‚       â”œâ”€â”€ DatabaseConnection interface
â”‚       â””â”€â”€ Repository<T> interface
â”‚
â”œâ”€â”€ exceptions/
â”‚   â””â”€â”€ index.ts
â”‚       â”œâ”€â”€ SuperTokensException (base)
â”‚       â”œâ”€â”€ BadInputException
â”‚       â”œâ”€â”€ UnauthorizedException
â”‚       â”œâ”€â”€ ForbiddenException
â”‚       â”œâ”€â”€ TenantDoesNotExistException
â”‚       â”œâ”€â”€ UserDoesNotExistException
â”‚       â”œâ”€â”€ UserAlreadyExistsException
â”‚       â”œâ”€â”€ InvalidSessionException
â”‚       â””â”€â”€ InvalidTokenException
â”‚
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts
â”‚       â”œâ”€â”€ User interface
â”‚       â”œâ”€â”€ Session interface
â”‚       â”œâ”€â”€ Tenant interface
â”‚       â”œâ”€â”€ Role interface
â”‚       â”œâ”€â”€ UserMetadata interface
â”‚       â””â”€â”€ EmailVerificationToken interface
â”‚
â””â”€â”€ utils/
    â”œâ”€â”€ logger.ts
    â”‚   â”œâ”€â”€ static log(level, message, data)
    â”‚   â”œâ”€â”€ static debug()
    â”‚   â”œâ”€â”€ static info()
    â”‚   â”œâ”€â”€ static warn()
    â”‚   â””â”€â”€ static error()
    â”‚
    â”œâ”€â”€ validator.ts
    â”‚   â”œâ”€â”€ Validator class
    â”‚   â”œâ”€â”€ create() (Factory)
    â”‚   â”œâ”€â”€ isRequired(value, field)
    â”‚   â”œâ”€â”€ isEmail(value, field)
    â”‚   â”œâ”€â”€ isString(value, field)
    â”‚   â”œâ”€â”€ minLength(value, min, field)
    â”‚   â”œâ”€â”€ maxLength(value, max, field)
    â”‚   â”œâ”€â”€ isValid()
    â”‚   â”œâ”€â”€ getErrors()
    â”‚   â””â”€â”€ throwIfInvalid()
    â”‚
    â”œâ”€â”€ helpers.ts
    â”‚   â”œâ”€â”€ generateRandomString(length)
    â”‚   â”œâ”€â”€ isValidEmail(email)
    â”‚   â”œâ”€â”€ isValidPassword(password)
    â”‚   â”œâ”€â”€ validateInput(value, type, required)
    â”‚   â”œâ”€â”€ calculateTokenExpiry(seconds)
    â”‚   â”œâ”€â”€ isTokenExpired(expiryDate)
    â”‚   â”œâ”€â”€ deepClone<T>(obj)
    â”‚   â””â”€â”€ omit<T>(obj, keys)
    â”‚
    â””â”€â”€ __tests__/
        â”œâ”€â”€ logger.test.ts
        â”‚   â”œâ”€â”€ should log info messages
        â”‚   â”œâ”€â”€ should log error messages
        â”‚   â””â”€â”€ should log warning messages
        â”‚
        â””â”€â”€ validator.test.ts
            â”œâ”€â”€ should validate required field
            â”œâ”€â”€ should validate email format
            â”œâ”€â”€ should accept valid email
            â”œâ”€â”€ should validate string type
            â”œâ”€â”€ should validate min length
            â”œâ”€â”€ should validate max length
            â””â”€â”€ should support chaining

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESUMEN RÃPIDO:

âœ… ESTRUCTURA:      Completa y modular
âœ… CONFIGURACIÃ“N:   YAML + .env
âœ… SEGURIDAD:       Helmet, CORS, JWT ready
âœ… RUTAS:          31 endpoints listos
âœ… SERVICIOS:       8 servicios Singleton
âœ… MIDDLEWARE:      3 middleware configurados
âœ… VALIDACIÃ“N:      Validator class lista
âœ… LOGGING:         Logger estructurado
âœ… TESTING:         Jest + 2 test suites
âœ… DOCKER:          Dockerfile + docker-compose
âœ… DOCUMENTACIÃ“N:   7 guÃ­as completas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRÃ“XIMAS ACCIONES:

1. npm install
2. cp .env.example .env
3. npm run build
4. Implementar database layer
5. Implementar JWT service
6. Implementar email service
7. Completar servicios de negocio
8. Agregar tests
9. Docker deploy

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
