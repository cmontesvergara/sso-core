# ============================================================
# SSO Backend Environment Configuration
# ============================================================
# Convención: config.yaml path → env var name
#   database.host → DATABASE_HOST
#   jwt.secret → JWT_SECRET
#   
# ⚠️  CAMPOS OBLIGATORIOS marcados con [MANDATORY]
# ============================================================

# ============================================================
# Server Configuration
# ============================================================
PORT=3567
HOST=localhost

# ============================================================
# Database Configuration [ALL MANDATORY]
# ============================================================
# La DATABASE_URL se construye automáticamente desde estas variables:
# postgresql://user:password@host:port/name?sslmode=disable
# DATABASE_TYPE tiene default 'postgresql' en config.yaml
# DATABASE_SSL tiene default 'false' en config.yaml
# ============================================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=u_sso
DATABASE_USER=postgres
DATABASE_PASSWORD=your-password

# ============================================================
# JWT Configuration [JWT_SECRET is MANDATORY]
# ============================================================
JWT_SECRET=change-me-in-production-use-long-random-string
JWT_ALGORITHM=HS256
ACCESS_TOKEN_VALIDITY=3600
REFRESH_TOKEN_VALIDITY=604800

# ============================================================
# Email Configuration
# ============================================================
EMAIL_PROVIDER=smtp
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxx

# ============================================================
# CORS Configuration
# ============================================================
CORS_ORIGIN=http://localhost:3000

# ============================================================
# Logging
# ============================================================
LOGGING_LEVEL=info

# Session Configuration
SESSION_EXPIRY=3600
SESSION_REFRESH_THRESHOLD=600

# Email Configuration

# Option 1: Resend API (Production recommended)
EMAIL_PROVIDER=resend
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxx

# Option 2: SMTP (Nodemailer)
# EMAIL_PROVIDER=nodemailer
# EMAIL_HOST=smtp.mailtrap.io
# EMAIL_PORT=2525
# EMAIL_SECURE=false
# EMAIL_USER=your-username
# EMAIL_PASS=your-password

# Option 3: Ethereal (Development - automatic test account)
# EMAIL_PROVIDER=ethereal
#EMAIL_FROM=noreply@sso.local

# CORS Configuration
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE

# Rate limit
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=100

# Logging
LOG_LEVEL=info

# Features
ENABLE_EMAIL_VERIFICATION=true
ENABLE_MFA=true
ENABLE_OAUTH=true
ENABLE_MULTITENANCY=true
